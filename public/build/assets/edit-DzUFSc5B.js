import{S as f}from"./main-9Qm2jZ7z.js";import{t as a,g as u}from"./helpers-DwlY0Bzp.js";import{h as p}from"./api-2skSE4Ue.js";import"./index-xsH4HHeE.js";const g=p();function h(){const d=document.getElementById("editFloorForm");if(!d)return;const s=document.getElementById("updateFloorBtn"),c=i=>{var n;document.querySelectorAll(".border-danger").forEach(t=>t.classList.remove("border-danger")),document.querySelectorAll(".invalid-feedback").forEach(t=>t.textContent="");for(const[t,e]of Object.entries(i)){const r=t.split(".");let o,l;if(r[0]==="locales"&&r.length===3){const m=window.AppConfig.pageData.locales[r[1]];o=document.getElementById(`name_${m}`),l=document.getElementById(`name_${m}_error`)}else o=document.querySelector(`[name="${t}"]`),l=document.getElementById(`${t}_error`);o&&o.classList.add("border-danger"),l&&(l.textContent=Array.isArray(e)?e[0]:e)}(n=document.querySelector(".border-danger, .invalid-feedback:not(:empty)"))==null||n.scrollIntoView({behavior:"smooth",block:"center"})};d.addEventListener("submit",async function(i){var n,t;i.preventDefault(),s.disabled=!0,s.innerHTML=`<i class="fas fa-spinner fa-spin me-2"></i> ${a("saving")}`,c({});try{const e=new FormData(this),r={_method:"PUT",value:e.get("value")||null,locales:[]};window.AppConfig.pageData.locales.forEach(o=>{r.locales.push({locale:o,name:e.get(`name_${o}`)})}),await g.post(u("dashboard.floor.update"),r),f.fire({icon:"success",title:a("update_success_title"),text:a("update_success_text"),timer:2e3,showConfirmButton:!1}).then(()=>window.location.href=u("dashboard.floor.index"))}catch(e){e.response&&e.response.status===422&&c(e.response.data.errors),f.fire({icon:"error",title:a("error_title"),text:((t=(n=e.response)==null?void 0:n.data)==null?void 0:t.message)||a("form_error_text")})}finally{s.disabled=!1,s.innerHTML=a("save")}})}document.addEventListener("DOMContentLoaded",h);
