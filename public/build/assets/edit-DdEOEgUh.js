import{S as u}from"./main-9Qm2jZ7z.js";import{t as n,g as l}from"./helpers-DwlY0Bzp.js";import{h as f}from"./api-C5g70RCE.js";import"./index-xsH4HHeE.js";const g=f();function y(){const c=document.getElementById("editTypeForm");if(!c)return;const s=document.getElementById("updateTypeBtn"),m=d=>{var a;document.querySelectorAll(".border-danger").forEach(e=>e.classList.remove("border-danger")),document.querySelectorAll(".invalid-feedback").forEach(e=>e.textContent="");for(const[e,t]of Object.entries(d)){const r=e.split(".");let o,i;if(r[0]==="locales"&&r.length===3){const p=window.AppConfig.pageData.locales[r[1]];o=document.getElementById(`name_${p}`),i=document.getElementById(`name_${p}_error`)}else o=document.querySelector(`[name="${e}"]`),i=document.getElementById(`${e}_error`);o&&o.classList.add("border-danger"),i&&(i.textContent=Array.isArray(t)?t[0]:t)}(a=document.querySelector(".border-danger, .invalid-feedback:not(:empty)"))==null||a.scrollIntoView({behavior:"smooth",block:"center"})};c.addEventListener("submit",async function(d){var a,e;console.log("submit"),d.preventDefault(),s.disabled=!0,s.innerHTML=`<i class="fas fa-spinner fa-spin me-2"></i> ${n("saving")}`,m({});try{const t=new FormData(this),r={_method:"PUT",locales:[]};window.AppConfig.pageData.locales.forEach(o=>{r.locales.push({locale:o,name:t.get(`name_${o}`)})}),console.log(l("api.type.update")),await g.post(l("api.type.update"),r),u.fire({icon:"success",title:n("update_success_title"),text:n("update_success_text"),timer:2e3,showConfirmButton:!1}).then(()=>window.location.href=l("dashboard.type.index"))}catch(t){t.response&&t.response.status===422&&m(t.response.data.errors),u.fire({icon:"error",title:n("error_title"),text:((e=(a=t.response)==null?void 0:a.data)==null?void 0:e.message)||n("form_error_text")})}finally{s.disabled=!1,s.innerHTML=n("save")}})}document.addEventListener("DOMContentLoaded",y);
