import{P as m}from"./passwordManager-lmxsdzew.js";import{h as y}from"./api-B7h7ZzFK.js";import"./index-xsH4HHeE.js";import"./helpers-DwlY0Bzp.js";class g{constructor(e){this.modal=document.getElementById(e),this.modal&&(this.generatedInput=this.modal.querySelector("#generatedPasswordInput"),this.regenerateBtn=this.modal.querySelector("#regeneratePasswordBtn"),this.copyBtn=this.modal.querySelector("#copyPasswordBtn"),this.copyBtnText=this.modal.querySelector("#copyBtnText"),this.savedCheckbox=this.modal.querySelector("#passwordSavedCheckbox"),this.closeBtn=this.modal.querySelector("#passwordModalCloseBtn"),this.setupEventListeners())}setupEventListeners(){var e,o,s,a;(e=this.regenerateBtn)==null||e.addEventListener("click",()=>this.regeneratePassword()),(o=this.copyBtn)==null||o.addEventListener("click",()=>this.copyToClipboard()),(s=this.closeBtn)==null||s.addEventListener("click",()=>this.closeModal()),(a=this.savedCheckbox)==null||a.addEventListener("change",()=>{this.copyBtn.disabled=!this.savedCheckbox.checked})}generatePassword(e=14){const o="ABCDEFGHIJKLMNOPQRSTUVWXYZ",s="abcdefghijklmnopqrstuvwxyz",a="0123456789",n="!@#$%^&*()",r=o+s+a+n;let t="";t+=o[Math.floor(Math.random()*o.length)],t+=s[Math.floor(Math.random()*s.length)],t+=a[Math.floor(Math.random()*a.length)],t+=n[Math.floor(Math.random()*n.length)];for(let d=t.length;d<e;d++)t+=r[Math.floor(Math.random()*r.length)];return t.split("").sort(()=>.5-Math.random()).join("")}regeneratePassword(){this.generatedInput.value=this.generatePassword(),this.savedCheckbox.checked=!1,this.copyBtn.disabled=!0,this.copyBtnText&&(this.copyBtnText.textContent=this.translate("copy_button"))}async copyToClipboard(){this.copyBtn.disabled||(await navigator.clipboard.writeText(this.generatedInput.value),this.copyBtnText&&(this.copyBtnText.textContent=this.translate("copied_button")),setTimeout(()=>this.closeModal(),1200))}openModal(){this.regeneratePassword(),this.modal.style.display="flex"}closeModal(){this.modal.style.display="none"}translate(e){return{copy_button:"Copy",copied_button:"Copied!"}[e]||e}}document.addEventListener("DOMContentLoaded",()=>{const i=m.init(),e=new g("passwordGeneratorModal"),o=document.getElementById("passwordGenerateBtn");o&&o.addEventListener("click",()=>{e.openModal();const r=document.getElementById("resetPasswordInput"),t=document.getElementById("resetConfirmPasswordInput");r&&t&&e.generatedInput.addEventListener("input",()=>{r.value=e.generatedInput.value,t.value=e.generatedInput.value,i.updateIcon("resetPasswordInput"),i.updateIcon("resetConfirmPasswordInput")})});const s=document.getElementById("resetPasswordForm"),a=document.getElementById("submitBtn"),n=document.getElementById("status-display");s&&s.addEventListener("submit",async r=>{var c,h;r.preventDefault(),n.innerHTML="",n.style.display="none",a.disabled=!0;const t=a.querySelector(".spinner-border");t&&t.classList.remove("d-none");try{const l=new FormData(s);var d=await y().post(s.action,l);d=d.data,n.className="alert alert-success",n.innerHTML=d.message,s.style.display="none",setTimeout(()=>{var p;window.location.href=((p=d.data)==null?void 0:p.redirect)||"/"},3e3)}catch(l){var u=((h=(c=l.response)==null?void 0:c.data)==null?void 0:h.message)??null;n.className="alert alert-danger",n.innerHTML=u||"A network error occurred. Please try again."}finally{n.style.display="block",a.disabled=!1,t&&t.classList.add("d-none")}})});
