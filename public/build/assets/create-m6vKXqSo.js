import{S as f}from"./main-9Qm2jZ7z.js";import{t as a,g as p}from"./helpers-DwlY0Bzp.js";import{h as u}from"./api-C5g70RCE.js";import"./index-xsH4HHeE.js";const y=u();function g(){const l=document.getElementById("createTypeForm");if(!l)return;const s=document.getElementById("createTypeBtn"),d=c=>{var n;document.querySelectorAll(".border-danger").forEach(e=>e.classList.remove("border-danger")),document.querySelectorAll(".invalid-feedback").forEach(e=>e.textContent="");for(const[e,t]of Object.entries(c)){const o=e.split(".");let r,i;if(o[0]==="locales"&&o.length===3){const m=window.AppConfig.pageData.locales[o[1]];r=document.getElementById(`name_${m}`),i=document.getElementById(`name_${m}_error`)}else r=document.querySelector(`[name="${e}"]`),i=document.getElementById(`${e}_error`);r&&r.classList.add("border-danger"),i&&(i.textContent=Array.isArray(t)?t[0]:t)}(n=document.querySelector(".border-danger, .invalid-feedback:not(:empty)"))==null||n.scrollIntoView({behavior:"smooth",block:"center"})};l.addEventListener("submit",async function(c){var n,e;c.preventDefault(),s.disabled=!0,s.innerHTML=`<i class="fas fa-spinner fa-spin me-2"></i> ${a("saving")}`,d({});try{const t=new FormData(this),o={locales:[]};window.AppConfig.pageData.locales.forEach(r=>{o.locales.push({locale:r,name:t.get(`name_${r}`)})}),await y.post(p("api.type.store"),o),f.fire({icon:"success",title:a("create_success_title"),text:a("create_success_text"),timer:2e3,showConfirmButton:!1}).then(()=>window.location.href=p("dashboard.type.index"))}catch(t){t.response&&t.response.status===422&&d(t.response.data.errors),f.fire({icon:"error",title:a("error_title"),text:((e=(n=t.response)==null?void 0:n.data)==null?void 0:e.message)||a("form_error_text")})}finally{s.disabled=!1,s.innerHTML=a("save")}})}document.addEventListener("DOMContentLoaded",g);
