import{a as w}from"./index-xsH4HHeE.js";import{t as u,s as g}from"./helpers-DwlY0Bzp.js";function A({baseURL:m="/",multipart:f=!1,onStatusCodeError:a={},customOnRejected:n=null}={}){const e=w.create({baseURL:m,headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json","Content-Type":f?"multipart/form-data":"application/json",Authorization:`Bearer ${window.AppConfig.apiToken}`,"Accept-Language":window.AppConfig.locale},withCredentials:!0}),o=document.querySelector('meta[name="csrf-token"]');return o&&(e.defaults.headers.common["X-CSRF-TOKEN"]=o.content),e.interceptors.response.use(t=>t,t=>{var i,c,p,l;const s=(i=t==null?void 0:t.response)==null?void 0:i.status,d=(p=(c=t==null?void 0:t.response)==null?void 0:c.data)==null?void 0:p.message;if(n)return n(t),Promise.reject(t);if(a[s])a[s](t);else switch(s){case 500:default:const h=d??u("network_error");(l=g)==null||l("error",{title:u("error_title"),bodyHtml:h});break}return Promise.reject(t)}),e}export{A as h};
