import{S as f}from"./main-9Qm2jZ7z.js";import{t as n,g as y}from"./helpers-DwlY0Bzp.js";import{h as _}from"./api-C5g70RCE.js";import"./index-xsH4HHeE.js";const b=_({multipart:!0});function w(){const m=document.getElementById("createCategoryForm");if(!m)return;const l=document.getElementById("createCategoryBtn"),i=document.getElementById("imageUpload"),c=document.getElementById("imagePreviewContainer"),o=document.getElementById("image-drop-area"),p=e=>{document.querySelectorAll(".border-danger").forEach(r=>r.classList.remove("border-danger","focus:border-danger","focus:ring-danger")),document.querySelectorAll(".invalid-feedback").forEach(r=>r.textContent="");for(const[r,a]of Object.entries(e)){const d=r.split(".");let s,g;if(d[0]==="locales"&&d.length===3){const v=window.AppConfig.pageData.locales[d[1]];s=document.getElementById(`name_${v}`),g=document.getElementById(`name_${v}_error`)}else s=document.querySelector(`[name="${r}"]`),g=document.getElementById(`${r}_error`);s&&s.classList.add("border-danger","focus:border-danger","focus:ring-danger"),g&&(g.textContent=Array.isArray(a)?a[0]:a)}const t=document.querySelector(".border-danger, .invalid-feedback:not(:empty)");t&&t.scrollIntoView({behavior:"smooth",block:"center"})},u=e=>{if(!e){c.innerHTML=`<p class="self-center w-full text-sm text-center text-text-secondary">${n("no_image_preview")}</p>`;return}if(e.size>2*1024*1024){f.fire(n("swal_file_too_large_title"),n("swal_file_too_large_text"),"warning"),i.value="";return}if(!["image/jpeg","image/png","image/gif","image/webp"].includes(e.type)){f.fire(n("swal_invalid_type_title"),n("swal_invalid_type_text"),"warning"),i.value="";return}const t=new FileReader;t.onload=r=>{c.innerHTML=`
                <div class="relative w-28 h-28 group">
                    <img src="${r.target.result}" alt="Image Preview" class="object-cover w-full h-full rounded-md border border-border-color">
                    <button type="button" class="absolute top-1 right-1 flex items-center justify-center w-5 h-5 bg-danger rounded-full text-white opacity-0 group-hover:opacity-100 transition-opacity focus:outline-none" title="${n("button_remove_image")}">Ã—</button>
                </div>`,c.querySelector("button").addEventListener("click",()=>{i.value="",u(null)})},t.readAsDataURL(e)};i&&c&&i.addEventListener("change",e=>u(e.target.files[0])),o&&(["dragenter","dragover","dragleave","drop"].forEach(e=>{o.addEventListener(e,t=>{t.preventDefault(),t.stopPropagation()},!1),document.body.addEventListener(e,t=>{t.preventDefault(),t.stopPropagation()},!1)}),["dragenter","dragover"].forEach(e=>o.addEventListener(e,()=>o.classList.add("drag-over"))),["dragleave","drop"].forEach(e=>o.addEventListener(e,()=>o.classList.remove("drag-over"))),o.addEventListener("drop",e=>{i.files=e.dataTransfer.files,u(e.dataTransfer.files[0])})),m.addEventListener("submit",async function(e){var t,r;e.preventDefault(),l.disabled=!0,l.innerHTML=`<i class="fas fa-spinner fa-spin me-2"></i> ${n("saving")}`,p({});try{const a=new FormData(this),d=[];window.AppConfig.pageData.locales.forEach(s=>{d.push({locale:s,name:a.get(`name_${s}`)})}),a.append("locales",JSON.stringify(d)),await b.post(y("api.category.store"),a),f.fire({icon:"success",title:n("create_success_title"),text:n("create_success_text"),timer:2e3,showConfirmButton:!1}).then(()=>window.location.href=y("dashboard.category.index"))}catch(a){a.response&&a.response.status===422&&p(a.response.data.errors),f.fire({icon:"error",title:n("error_title"),text:((r=(t=a.response)==null?void 0:t.data)==null?void 0:r.message)||n("form_error_text")})}finally{l.disabled=!1,l.innerHTML=n("save")}})}document.addEventListener("DOMContentLoaded",w);
